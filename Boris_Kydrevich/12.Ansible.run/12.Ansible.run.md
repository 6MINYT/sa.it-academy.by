## Create playbook to display parameters from remote host

### play.yaml

````
---
- hosts: ec_all
  pre_tasks:
    - name: Set authorized key taken from file
      authorized_key:
        user: "{{ ansible_ssh_user }}"
        state: present
        key: "{{ item }}"
      with_items:
      - "{{ lookup('file', '/home/user/.ssh/id_rsa.pub') }}"
  tasks:
    - name: Print OS/Version
      debug:
        msg: "{{ ansible_distribution}} | {{ ansible_distribution_version}}"
    - name: Print Mounts 
      debug:
        msg: "{{ ansible_facts.mounts[0] }}"
    - name: Print Memory 
      debug:
        msg: "{{ ansible_facts.memory_mb.real }}"

````
#### output

````
user@ubuntu-bionic:/home/user/ansible$ ansible-playbook test.yaml -i hosts.yaml

PLAY [ec_all] *********************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************
Sunday 11 April 2021  11:31:53 +0000 (0:00:00.050)       0:00:00.050 ********** 
ok: [worker_02]
ok: [worker_01]

TASK [Set authorized key taken from file] *****************************************************************************************************
Sunday 11 April 2021  11:31:56 +0000 (0:00:03.059)       0:00:03.110 ********** 
ok: [worker_02] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDlAYIUoOJaMa6icD1+WtWK9kgXL4UzgJ/mN43BnSdGyyhaxTBHVvjiEAszOsADuaE1s5Jd04LeNO/0R7LQv3UmuJ7jiqnIvyhAu3JUWwcwRJ3Uci17WWh5KQHNEqw4vGrdgvBqBu1oDoBq+rMabetvUsG4RlBtkXcb7cYAkO2cDGzcLUq38twuwvNpsnMTogCcLEGMTjrfRlesl1caQsZy38WUl2CC1W0GSEN/RsObc8QGU6HshDWc3BzFoEbv83uQgisyHytl1XhlVD0yTTq2yI4+k89NXDcJHzwXDbq7CwZVpnFDMo9KLJhOe7Gq4hSyZ0Ob1hIBW/4xNzP1xa6L user@ubuntu-bionic)
ok: [worker_01] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDlAYIUoOJaMa6icD1+WtWK9kgXL4UzgJ/mN43BnSdGyyhaxTBHVvjiEAszOsADuaE1s5Jd04LeNO/0R7LQv3UmuJ7jiqnIvyhAu3JUWwcwRJ3Uci17WWh5KQHNEqw4vGrdgvBqBu1oDoBq+rMabetvUsG4RlBtkXcb7cYAkO2cDGzcLUq38twuwvNpsnMTogCcLEGMTjrfRlesl1caQsZy38WUl2CC1W0GSEN/RsObc8QGU6HshDWc3BzFoEbv83uQgisyHytl1XhlVD0yTTq2yI4+k89NXDcJHzwXDbq7CwZVpnFDMo9KLJhOe7Gq4hSyZ0Ob1hIBW/4xNzP1xa6L user@ubuntu-bionic)

TASK [Print OS/Version] ***********************************************************************************************************************
Sunday 11 April 2021  11:32:04 +0000 (0:00:07.871)       0:00:10.981 ********** 
ok: [worker_01] => {
    "msg": "CentOS | 7.9"
}
ok: [worker_02] => {
    "msg": "Ubuntu | 18.04"
}

TASK [Print Mounts] ***************************************************************************************************************************
Sunday 11 April 2021  11:32:04 +0000 (0:00:00.252)       0:00:11.234 ********** 
ok: [worker_01] => {
    "msg": {
        "block_available": 4673246,
        "block_size": 4096,
        "block_total": 5127828,
        "block_used": 454582,
        "device": "/dev/loop10",
        "fstype": "ext4",
        "inode_available": 1289043,
        "inode_total": 1310720,
        "inode_used": 21677,
        "mount": "/",
        "options": "rw,relatime",
        "size_available": 19141615616,
        "size_total": 21003583488,
        "uuid": "N/A"
    }
}
ok: [worker_02] => {
    "msg": {
        "block_available": 4549362,
        "block_size": 4096,
        "block_total": 5127828,
        "block_used": 578466,
        "device": "/dev/loop11",
        "fstype": "ext4",
        "inode_available": 1283822,
        "inode_total": 1310720,
        "inode_used": 26898,
        "mount": "/",
        "options": "rw,relatime",
        "size_available": 18634186752,
        "size_total": 21003583488,
        "uuid": "N/A"
    }
}

TASK [Print Memory] ***************************************************************************************************************************
Sunday 11 April 2021  11:32:04 +0000 (0:00:00.283)       0:00:11.517 ********** 
ok: [worker_01] => {
    "msg": {
        "free": 3981,
        "total": 4096,
        "used": 115
    }
}
ok: [worker_02] => {
    "msg": {
        "free": 3902,
        "total": 4096,
        "used": 194
    }
}

PLAY RECAP ************************************************************************************************************************************
worker_01                  : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
worker_02                  : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Sunday 11 April 2021  11:32:05 +0000 (0:00:00.240)       0:00:11.758 ********** 
=============================================================================== 
Set authorized key taken from file ----------------------------------------------------------------------------------------------------- 7.87s
Gathering Facts ------------------------------------------------------------------------------------------------------------------------ 3.06s
Print Mounts --------------------------------------------------------------------------------------------------------------------------- 0.28s
Print OS/Version ----------------------------------------------------------------------------------------------------------------------- 0.25s
Print Memory --------------------------------------------------------------------------------------------------------------------------- 0.24s
`````

