# 12.Ansible.run

## Creating user

```
[vagrant@localhost .ansible]$ ansible-playbook -i hosts.yaml useradd.yaml 

PLAY [vms] *****************************************************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************************************
Saturday 14 November 2020  12:04:10 +0000 (0:00:00.115)       0:00:00.115 ***** 
ok: [centos]
ok: [ubuntu]

TASK [Creating user Yura] **************************************************************************************************************************************************************
Saturday 14 November 2020  12:04:17 +0000 (0:00:06.376)       0:00:06.492 ***** 
ok: [centos]
ok: [ubuntu]

TASK [Authentication] ******************************************************************************************************************************************************************
Saturday 14 November 2020  12:04:21 +0000 (0:00:04.370)       0:00:10.862 ***** 
ok: [centos]
ok: [ubuntu]

TASK [Install sudo on Centos] **********************************************************************************************************************************************************
Saturday 14 November 2020  12:04:25 +0000 (0:00:04.210)       0:00:15.073 ***** 
skipping: [ubuntu]
[WARNING]: Consider using the yum module rather than running 'yum'.  If you need to use command because yum is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [centos]

TASK [debug] ***************************************************************************************************************************************************************************
Saturday 14 November 2020  12:04:29 +0000 (0:00:04.142)       0:00:19.215 ***** 
ok: [centos] => {
    "msg": [
        "Loaded plugins: fastestmirror",
        "Loading mirror speeds from cached hostfile",
        " * base: mirror.datacenter.by",
        " * extras: mirror.datacenter.by",
        " * updates: mirror.datacenter.by",
        "Package sudo-1.8.23-10.el7.x86_64 already installed and latest version",
        "Nothing to do"
    ]
}
skipping: [ubuntu]

TASK [Add Yura for upgrade command] ****************************************************************************************************************************************************
Saturday 14 November 2020  12:04:29 +0000 (0:00:00.129)       0:00:19.345 ***** 
skipping: [ubuntu]
ok: [centos]

TASK [Add Yura for upgrade command] ****************************************************************************************************************************************************
Saturday 14 November 2020  12:04:33 +0000 (0:00:03.419)       0:00:22.765 ***** 
skipping: [centos]
ok: [ubuntu]

TASK [Check user] **********************************************************************************************************************************************************************
Saturday 14 November 2020  12:04:38 +0000 (0:00:04.683)       0:00:27.449 ***** 
changed: [centos]
changed: [ubuntu]

TASK [debug] ***************************************************************************************************************************************************************************
Saturday 14 November 2020  12:04:42 +0000 (0:00:04.211)       0:00:31.660 ***** 
ok: [centos] => {
    "msg": [
        "Yura:x:1000:1000::/home/Yura:/bin/bash"
    ]
}
ok: [ubuntu] => {
    "msg": [
        "Yura:x:1000:1000::/home/Yura:/bin/sh"
    ]
}

TASK [System upgrade by Yura] **********************************************************************************************************************************************************
Saturday 14 November 2020  12:04:42 +0000 (0:00:00.129)       0:00:31.789 ***** 
skipping: [ubuntu]
[WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running sudo
changed: [centos]

TASK [debug] ***************************************************************************************************************************************************************************
Saturday 14 November 2020  12:04:46 +0000 (0:00:03.997)       0:00:35.787 ***** 
ok: [centos] => {
    "msg": [
        "Loaded plugins: fastestmirror",
        "Loading mirror speeds from cached hostfile",
        " * base: mirror.datacenter.by",
        " * extras: mirror.datacenter.by",
        " * updates: mirror.datacenter.by",
        "No packages marked for update"
    ]
}
skipping: [ubuntu]

TASK [System upgrade by Yura] **********************************************************************************************************************************************************
Saturday 14 November 2020  12:04:46 +0000 (0:00:00.141)       0:00:35.928 ***** 
skipping: [centos]
changed: [ubuntu]

TASK [debug] ***************************************************************************************************************************************************************************
Saturday 14 November 2020  12:04:51 +0000 (0:00:04.932)       0:00:40.861 ***** 
skipping: [centos]
ok: [ubuntu] => {
    "msg": [
        "Reading package lists...",
        "Building dependency tree...",
        "Reading state information...",
        "Calculating upgrade...",
        "0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded."
    ]
}

PLAY RECAP *****************************************************************************************************************************************************************************
centos                     : ok=10   changed=3    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
ubuntu                     : ok=8    changed=2    unreachable=0    failed=0    skipped=5    rescued=0    ignored=0   

Saturday 14 November 2020  12:04:51 +0000 (0:00:00.116)       0:00:40.978 ***** 
=============================================================================== 
Gathering Facts ----------------------------------------------------------------------------------------------------------------------------------------------------------------- 6.38s
System upgrade by Yura ---------------------------------------------------------------------------------------------------------------------------------------------------------- 4.93s
Add Yura for upgrade command ---------------------------------------------------------------------------------------------------------------------------------------------------- 4.68s
Creating user Yura -------------------------------------------------------------------------------------------------------------------------------------------------------------- 4.37s
Check user ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- 4.21s
Authentication ------------------------------------------------------------------------------------------------------------------------------------------------------------------ 4.21s
Install sudo on Centos ---------------------------------------------------------------------------------------------------------------------------------------------------------- 4.14s
System upgrade by Yura ---------------------------------------------------------------------------------------------------------------------------------------------------------- 4.00s
Add Yura for upgrade command ---------------------------------------------------------------------------------------------------------------------------------------------------- 3.42s
debug --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.14s
debug --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.13s
debug --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.13s
debug --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.12s
Playbook run took 0 days, 0 hours, 0 minutes, 40 seconds
```

## Checking OS RAM Disk

```
[vagrant@localhost .ansible]$ ansible-playbook -i hosts.yaml play.yaml 

PLAY [vms] *****************************************************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************************************
Saturday 14 November 2020  12:06:44 +0000 (0:00:00.113)       0:00:00.113 ***** 
ok: [centos]
ok: [ubuntu]

TASK [Mounts] **************************************************************************************************************************************************************************
Saturday 14 November 2020  12:06:51 +0000 (0:00:06.350)       0:00:06.464 ***** 
ok: [centos] => {
    "msg": {
        "block_available": 1283266,
        "block_size": 4096,
        "block_total": 1531792,
        "block_used": 248526,
        "device": "/dev/mapper/d01-vm--3005--disk--0",
        "fstype": "ext4",
        "inode_available": 371731,
        "inode_total": 393216,
        "inode_used": 21485,
        "mount": "/",
        "options": "rw,relatime",
        "size_available": 5256257536,
        "size_total": 6274220032,
        "uuid": "N/A"
    }
}
ok: [ubuntu] => {
    "msg": {
        "block_available": 1144187,
        "block_size": 4096,
        "block_total": 1531792,
        "block_used": 387605,
        "device": "/dev/mapper/d01-vm--3006--disk--0",
        "fstype": "ext4",
        "inode_available": 366298,
        "inode_total": 393216,
        "inode_used": 26918,
        "mount": "/",
        "options": "rw,relatime",
        "size_available": 4686589952,
        "size_total": 6274220032,
        "uuid": "N/A"
    }
}

TASK [OS] ******************************************************************************************************************************************************************************
Saturday 14 November 2020  12:06:51 +0000 (0:00:00.243)       0:00:06.708 ***** 
ok: [centos] => {
    "msg": "CentOS | 7.9"
}
ok: [ubuntu] => {
    "msg": "Ubuntu | 18.04"
}

TASK [RAM] *****************************************************************************************************************************************************************************
Saturday 14 November 2020  12:06:51 +0000 (0:00:00.242)       0:00:06.950 ***** 
ok: [centos] => {
    "msg": {
        "free": 3498,
        "total": 4096,
        "used": 598
    }
}
ok: [ubuntu] => {
    "msg": {
        "free": 3189,
        "total": 4096,
        "used": 907
    }
}

PLAY RECAP *****************************************************************************************************************************************************************************
centos                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
ubuntu                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Saturday 14 November 2020  12:06:51 +0000 (0:00:00.228)       0:00:07.178 ***** 
=============================================================================== 
Gathering Facts ----------------------------------------------------------------------------------------------------------------------------------------------------------------- 6.35s
Mounts -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.24s
OS ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.24s
RAM ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.23s
Playbook run took 0 days, 0 hours, 0 minutes, 7 seconds
```
